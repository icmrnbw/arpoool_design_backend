{% extends 'chunks/base.html' %}
{% load static %}
{% load tags %}
{% block content %}

    <section
            class="w-[1140px] max-1000px:pb-[90px] max-1180px:px-5 max-1180px:w-auto m-auto flex flex-col justify-center mt-[139px] text-center pb-[190px]">
        <img src="{% static 'img/bg.gif' %}" alt="Background GIF"
             class="background-gif max-[500px]:h-[300px] max-[500px]:w-[300px] absolute left-[97%] w-[312px] h-[312px] object-cover transform -translate-x-1/2 -translate-y-1/2">
        <h2 class="text-[#161616] max-1000px:text-[38px] max-[500px]:text-[22px] max-1000px:leading-[42px] max-[500px]:leading-[28px] font-normal text-[55px] leading-[71.5px] mb-2.5 days-one-regular">
            {{ settings.portfolio.header }}</h2>
        <p class="self-center w-[60%] max-[500px]:w-full max-1000px:text-[15px] max-[500px]:text-[12px] text-[#161616] text-[18px] mb-[30px]">
            {{ settings.portfolio.text }}</p>
        <img src="{% static 'img/bg.gif' %}" alt="Background GIF"
             class="background-gif max-[500px]:h-[300px] max-[500px]:w-[300px] absolute top-[55%] left-[2%] w-[269px] h-[269px] object-cover transform -translate-x-1/2 -translate-y-1/2">
    </section>

    <section class="w-[914px] max-[954px]:px-5 max-[954px]:w-auto m-auto mt-[90px]">
        <div class="flex justify-around flex-wrap gap-[15px] max-1000px:justify-normal">
            <a href="?"
               class="rounded-[10px] max-[500px]:text-[14px] border-[1px] border-[#9000FF] py-2.5 px-[15px] text-center"
               {% if not request.GET.service %}style="background-color:#9000FF; color: white{% endif %}">
                Все
            </a>

            {% for service in filterset.form.service.field.queryset %}
                <a href="?service={{ service.id }}"
                   class="rounded-[10px] max-[500px]:text-[14px] border-[1px] border-[#9000FF] py-2.5 px-[15px] text-center"
                   {% if service.id|stringformat:"s" in request.GET.service %}style="background-color:#9000FF; color: white"{% endif %}>
                    {{ service.name }}
                </a>
            {% endfor %}
        </div>

    </section>

    <section class="w-[1122px] max-[1164px]:px-5 max-[1164px]:w-auto m-auto">
        {% for project in projects %}
            {% if project|length == 1 %}
            <div class="mt-[36px] mb-[90px] max-[500px]:mb-[30px]">
                <a href="{% url 'portfolio_detail' project.0.id %}" class="flex flex-col-reverse">
                    <div>
                        <p class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616]">
                            {{ project.0.name }}
                        </p>
                        <p class="max-[500px]:text-[12px]">{{ project.0.service.all|join:", " }}</p>
                    </div>
                    <div class="mb-4">
                        <img src="{{ project.0.preview.url }}" alt="FINSUM"
                             class="object-cover max-h-[500px] w-full max-[500px]:rounded-[7px] rounded-[30px] -rotate-[2.13deg]">
                    </div>
                </a>
            </div>
            {% else %}
            {% with forloop.counter|divisibleby:4 as even %}
            <div class="flex {% if not even %}flex-row-reverse{% endif %} justify-between gap-8">
                {% for item in project %}
                    <div class="mt-[36px]{% if forloop.last %}  w-[30%]{% else %}mb-[90px] w-[60%] max-[500px]:w-50%{% endif %}">
                        <a href="{% url 'portfolio_detail' item.id %}">
                            <div class="flex flex-col-reverse">
                                <div>
                                    <p class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616]">
                                        {{ item.name }}
                                    </p>
                                    <p class="max-[500px]:text-[12px]">{{ item.service.all|join:", " }}</p>
                                </div>
                                <div class="mb-[21px] max-[320px]:mb-[15px] max-h-[500px] h-full w-full">
                                    <img src="{{ item.preview.url }}" alt="FINSUM"
                                         class="object-cover max-h-[500px] h-full w-full max-[500px]:rounded-[7px] rounded-[30px]" style="transform: rotate({{ forloop.counter|get_degree }}deg)">
                                </div>
                            </div>
                        </a>
                    </div>
{#                    <div class="mt-[36px] mb-[90px] w-[60%] max-[500px]:w-50%">#}
{#                        <a href="#">#}
{#                            <div class="flex flex-col-reverse">#}
{#                                <div>#}
{#                                    <p class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616]">#}
{#                                        FIN<span#}
{#                                            class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616] opacity-[30%]">SUM</span>#}
{#                                    </p>#}
{#                                    <p class="max-[500px]:text-[12px]">logo, UI Design, branding</p>#}
{#                                </div>#}
{#                                <div class="mb-4 max-h-[500px] h-full w-full">#}
{#                                    <img src="{% static 'img/project-2.png' %}" alt="FINSUM"#}
{#                                         class="object-cover max-h-[500px] h-full w-full max-[500px]:rounded-[7px] rounded-[30px] -rotate-[2.13deg]">#}
{#                                </div>#}
{#                            </div>#}
{#                        </a>#}
{#                    </div>#}
                {% endfor %}
            </div>
            {% endwith %}
{#            <div class="w-[914px] max-[954px]:w-auto m-auto mb-[90px] max-[500px]:mb-[30px]">#}
{#                <div>#}
{#                    <a href="#" class="flex flex-col-reverse">#}
{#                        <div>#}
{#                            <p class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616]">#}
{#                                FIN<span#}
{#                                    class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616] opacity-[30%]">SUM</span>#}
{#                            </p>#}
{#                            <p class="max-[500px]:text-[12px]">logo, UI Design, branding</p>#}
{#                        </div>#}
{#                        <div class="mb-4 max-h-[500px] h-full w-full">#}
{#                            <img src="{% static 'img/project-1.png' %}" alt="FINSUM"#}
{#                                 class="object-cover max-h-[500px] h-full w-full max-[500px]:rounded-[7px] rounded-[30px]">#}
{#                        </div>#}
{#                    </a>#}
{#                </div>#}
{#            </div>#}
{#            <div class="flex flex-row-reverse justify-between gap-8">#}
{#                <div class="mt-[36px] w-[30%] max-[500px]:w-40%">#}
{#                    <a href="#">#}
{#                        <div class="flex flex-col-reverse">#}
{#                            <div>#}
{#                                <p class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616]">#}
{#                                    FIN<span#}
{#                                        class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616] opacity-[30%]">SUM</span>#}
{#                                </p>#}
{#                                <p class="max-[500px]:text-[12px]">logo, UI Design, branding</p>#}
{#                            </div>#}
{#                            <div class="mb-4 max-h-[500px] h-full w-full">#}
{#                                <img src="{% static 'img/project-5.png' %}" alt="FINSUM"#}
{#                                     class="object-cover max-h-[500px] h-full w-full max-[500px]:rounded-[7px] rounded-[30px]">#}
{#                            </div>#}
{#                        </div>#}
{#                    </a>#}
{#                </div>#}
{#                <div class="mt-[36px] mb-[90px] w-[60%] max-[500px]:w-50%">#}
{#                    <a href="#">#}
{#                        <div class="flex flex-col-reverse">#}
{#                            <div>#}
{#                                <p class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616]">#}
{#                                    FIN<span#}
{#                                        class="days-one-regular font-normal max-1000px:text-[29px] max-[500px]:text-[18px] text-[40px] text-[#161616] opacity-[30%]">SUM</span>#}
{#                                </p>#}
{#                                <p class="max-[500px]:text-[12px]">logo, UI Design, branding</p>#}
{#                            </div>#}
{#                            <div class="mb-4 max-h-[500px] h-full w-full">#}
{#                                <img src="{% static 'img/project-2.png' %}" alt="FINSUM"#}
{#                                     class="object-cover max-h-[500px] h-full w-full max-[500px]:rounded-[7px] rounded-[30px] -rotate-[2.13deg]">#}
{#                            </div>#}
{#                        </div>#}
{#                    </a>#}
{#                </div>#}
{#            </div>#}
            {% endif %}
        {% endfor %}
    </section>

  {% include 'chunks/form.html' %}

{% endblock %}
